[0m[1mdata.aws_region.current: Reading...[0m[0m
[0m[1mmodule.knowledge_base.data.aws_caller_identity.current: Reading...[0m[0m
[0m[1mmodule.iam.data.aws_region.current: Reading...[0m[0m
[0m[1mmodule.knowledge_base.data.aws_region.current: Reading...[0m[0m
[0m[1mdata.aws_caller_identity.current: Reading...[0m[0m
[0m[1mmodule.iam.data.aws_caller_identity.current: Reading...[0m[0m
[0m[1mdata.aws_region.current: Read complete after 0s [id=ap-southeast-1][0m
[0m[1mmodule.knowledge_base.data.aws_region.current: Read complete after 0s [id=ap-southeast-1][0m
[0m[1mmodule.iam.data.aws_region.current: Read complete after 0s [id=ap-southeast-1][0m
[0m[1mmodule.iam.data.aws_caller_identity.current: Read complete after 0s [id=315183407016][0m
[0m[1mmodule.knowledge_base.data.aws_caller_identity.current: Read complete after 0s [id=315183407016][0m
[0m[1mdata.aws_caller_identity.current: Read complete after 0s [id=315183407016][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m

Terraform will perform the following actions:

[1m  # module.bedrock_agent.aws_bedrockagent_agent.this[0m will be created
[0m  [32m+[0m[0m resource "aws_bedrockagent_agent" "this" {
      [32m+[0m[0m agent_arn                     = (known after apply)
      [32m+[0m[0m agent_collaboration           = (known after apply)
      [32m+[0m[0m agent_id                      = (known after apply)
      [32m+[0m[0m agent_name                    = "bedrock-chat-poc-agent-dev"
      [32m+[0m[0m agent_resource_role_arn       = (known after apply)
      [32m+[0m[0m agent_version                 = (known after apply)
      [32m+[0m[0m foundation_model              = "amazon.nova-2-lite-v1:0"
      [32m+[0m[0m id                            = (known after apply)
      [32m+[0m[0m idle_session_ttl_in_seconds   = 1800
      [32m+[0m[0m instruction                   = "You are a helpful AI assistant for the chat POC application."
      [32m+[0m[0m memory_configuration          = (known after apply)
      [32m+[0m[0m prepare_agent                 = true
      [32m+[0m[0m prepared_at                   = (known after apply)
      [32m+[0m[0m prompt_override_configuration = (known after apply)
      [32m+[0m[0m region                        = "ap-southeast-1"
      [32m+[0m[0m skip_resource_in_use_check    = false
      [32m+[0m[0m tags                          = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m tags_all                      = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
    }

[1m  # module.bedrock_agent.aws_bedrockagent_agent_alias.draft[0m will be created
[0m  [32m+[0m[0m resource "aws_bedrockagent_agent_alias" "draft" {
      [32m+[0m[0m agent_alias_arn       = (known after apply)
      [32m+[0m[0m agent_alias_id        = (known after apply)
      [32m+[0m[0m agent_alias_name      = "DRAFT"
      [32m+[0m[0m agent_id              = (known after apply)
      [32m+[0m[0m description           = "DRAFT version alias for bedrock-chat-poc-agent-dev"
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m region                = "ap-southeast-1"
      [32m+[0m[0m routing_configuration = (known after apply)
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
    }

[1m  # module.bedrock_agent.terraform_data.agent_preparation[0m will be created
[0m  [32m+[0m[0m resource "terraform_data" "agent_preparation" {
      [32m+[0m[0m id               = (known after apply)
      [32m+[0m[0m triggers_replace = {
          [32m+[0m[0m agent_id = (known after apply)
        }
    }

[1m  # module.bedrock_agent.time_sleep.agent_initialization[0m will be created
[0m  [32m+[0m[0m resource "time_sleep" "agent_initialization" {
      [32m+[0m[0m create_duration = "30s"
      [32m+[0m[0m id              = (known after apply)
    }

[1m  # module.iam.aws_iam_role.agent_role[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "agent_role" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Condition = {
                          [32m+[0m[0m ArnLike      = {
                              [32m+[0m[0m "aws:SourceArn" = "arn:aws:bedrock:ap-southeast-1:315183407016:agent/*"
                            }
                          [32m+[0m[0m StringEquals = {
                              [32m+[0m[0m "aws:SourceAccount" = "315183407016"
                            }
                        }
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "bedrock.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "bedrock-chat-poc-agent-role-dev"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Name"        = "bedrock-chat-poc-agent-role-dev"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Name"        = "bedrock-chat-poc-agent-role-dev"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m unique_id             = (known after apply)

      [32m+[0m[0m inline_policy (known after apply)
    }

[1m  # module.iam.aws_iam_role_policy.agent_policy[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "agent_policy" {
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = "bedrock-chat-poc-agent-policy-dev"
      [32m+[0m[0m name_prefix = (known after apply)
      [32m+[0m[0m policy      = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "bedrock:InvokeModel",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "arn:aws:bedrock:ap-southeast-1::foundation-model/amazon.nova-2-lite-v1:0"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role        = (known after apply)
    }

[1m  # module.knowledge_base.aws_iam_role.knowledge_base[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "knowledge_base" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Condition = {
                          [32m+[0m[0m ArnLike      = {
                              [32m+[0m[0m "aws:SourceArn" = "arn:aws:bedrock:ap-southeast-1:315183407016:knowledge-base/*"
                            }
                          [32m+[0m[0m StringEquals = {
                              [32m+[0m[0m "aws:SourceAccount" = "315183407016"
                            }
                        }
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "bedrock.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "bedrock-chat-poc-kb-role-dev"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m unique_id             = (known after apply)

      [32m+[0m[0m inline_policy (known after apply)
    }

[1m  # module.knowledge_base.aws_iam_role_policy.knowledge_base[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "knowledge_base" {
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = "bedrock-chat-poc-kb-policy-dev"
      [32m+[0m[0m name_prefix = (known after apply)
      [32m+[0m[0m policy      = (known after apply)
      [32m+[0m[0m role        = (known after apply)
    }

[1m  # module.knowledge_base.aws_s3_bucket.documents[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket" "documents" {
      [32m+[0m[0m acceleration_status         = (known after apply)
      [32m+[0m[0m acl                         = (known after apply)
      [32m+[0m[0m arn                         = (known after apply)
      [32m+[0m[0m bucket                      = "bedrock-chat-poc-kb-docs-dev"
      [32m+[0m[0m bucket_domain_name          = (known after apply)
      [32m+[0m[0m bucket_prefix               = (known after apply)
      [32m+[0m[0m bucket_region               = (known after apply)
      [32m+[0m[0m bucket_regional_domain_name = (known after apply)
      [32m+[0m[0m force_destroy               = false
      [32m+[0m[0m hosted_zone_id              = (known after apply)
      [32m+[0m[0m id                          = (known after apply)
      [32m+[0m[0m object_lock_enabled         = (known after apply)
      [32m+[0m[0m policy                      = (known after apply)
      [32m+[0m[0m region                      = "ap-southeast-1"
      [32m+[0m[0m request_payer               = (known after apply)
      [32m+[0m[0m tags                        = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Name"        = "bedrock-chat-poc-kb-docs-dev"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m tags_all                    = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Name"        = "bedrock-chat-poc-kb-docs-dev"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m website_domain              = (known after apply)
      [32m+[0m[0m website_endpoint            = (known after apply)

      [32m+[0m[0m cors_rule (known after apply)

      [32m+[0m[0m grant (known after apply)

      [32m+[0m[0m lifecycle_rule (known after apply)

      [32m+[0m[0m logging (known after apply)

      [32m+[0m[0m object_lock_configuration (known after apply)

      [32m+[0m[0m replication_configuration (known after apply)

      [32m+[0m[0m server_side_encryption_configuration (known after apply)

      [32m+[0m[0m versioning (known after apply)

      [32m+[0m[0m website (known after apply)
    }

[1m  # module.knowledge_base.aws_s3_bucket_server_side_encryption_configuration.documents[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_server_side_encryption_configuration" "documents" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m region = "ap-southeast-1"

      [32m+[0m[0m rule {
          [32m+[0m[0m blocked_encryption_types = []

          [32m+[0m[0m apply_server_side_encryption_by_default {
              [32m+[0m[0m sse_algorithm     = "AES256"
                [90m# (1 unchanged attribute hidden)[0m[0m
            }
        }
    }

[1m  # module.knowledge_base.aws_s3_bucket_versioning.documents[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_versioning" "documents" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m region = "ap-southeast-1"

      [32m+[0m[0m versioning_configuration {
          [32m+[0m[0m mfa_delete = (known after apply)
          [32m+[0m[0m status     = "Enabled"
        }
    }

[1m  # module.knowledge_base.aws_s3vectors_index.main[0m will be created
[0m  [32m+[0m[0m resource "aws_s3vectors_index" "main" {
      [32m+[0m[0m creation_time      = (known after apply)
      [32m+[0m[0m data_type          = "float32"
      [32m+[0m[0m dimension          = 1536
      [32m+[0m[0m distance_metric    = "cosine"
      [32m+[0m[0m index_arn          = (known after apply)
      [32m+[0m[0m index_name         = "bedrock-chat-poc-kb-index-dev"
      [32m+[0m[0m region             = "ap-southeast-1"
      [32m+[0m[0m tags               = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m tags_all           = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m vector_bucket_name = "bedrock-chat-poc-kb-vectors-dev"
    }

[1m  # module.knowledge_base.aws_s3vectors_vector_bucket.vectors[0m will be created
[0m  [32m+[0m[0m resource "aws_s3vectors_vector_bucket" "vectors" {
      [32m+[0m[0m creation_time            = (known after apply)
      [32m+[0m[0m encryption_configuration = [
          [32m+[0m[0m {
              [32m+[0m[0m sse_type = "AES256"
            },
        ]
      [32m+[0m[0m force_destroy            = false
      [32m+[0m[0m region                   = "ap-southeast-1"
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m tags_all                 = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m vector_bucket_arn        = (known after apply)
      [32m+[0m[0m vector_bucket_name       = "bedrock-chat-poc-kb-vectors-dev"
    }

[1m  # module.knowledge_base.awscc_bedrock_data_source.s3[0m will be created
[0m  [32m+[0m[0m resource "awscc_bedrock_data_source" "s3" {
      [32m+[0m[0m created_at                           = (known after apply)
      [32m+[0m[0m data_deletion_policy                 = (known after apply)
      [32m+[0m[0m data_source_configuration            = {
          [32m+[0m[0m confluence_configuration  = (known after apply)
          [32m+[0m[0m s3_configuration          = {
              [32m+[0m[0m bucket_arn              = (known after apply)
              [32m+[0m[0m bucket_owner_account_id = (known after apply)
              [32m+[0m[0m inclusion_prefixes      = (known after apply)
            }
          [32m+[0m[0m salesforce_configuration  = (known after apply)
          [32m+[0m[0m share_point_configuration = (known after apply)
          [32m+[0m[0m type                      = "S3"
          [32m+[0m[0m web_configuration         = (known after apply)
        }
      [32m+[0m[0m data_source_id                       = (known after apply)
      [32m+[0m[0m data_source_status                   = (known after apply)
      [32m+[0m[0m description                          = "S3 data source for bedrock-chat-poc knowledge base"
      [32m+[0m[0m failure_reasons                      = (known after apply)
      [32m+[0m[0m id                                   = (known after apply)
      [32m+[0m[0m knowledge_base_id                    = (known after apply)
      [32m+[0m[0m name                                 = "bedrock-chat-poc-kb-dev-s3-data-source"
      [32m+[0m[0m server_side_encryption_configuration = (known after apply)
      [32m+[0m[0m updated_at                           = (known after apply)
      [32m+[0m[0m vector_ingestion_configuration       = (known after apply)
    }

[1m  # module.knowledge_base.awscc_bedrock_knowledge_base.main[0m will be created
[0m  [32m+[0m[0m resource "awscc_bedrock_knowledge_base" "main" {
      [32m+[0m[0m created_at                   = (known after apply)
      [32m+[0m[0m description                  = "Knowledge base for bedrock-chat-poc (dev environment)"
      [32m+[0m[0m failure_reasons              = (known after apply)
      [32m+[0m[0m id                           = (known after apply)
      [32m+[0m[0m knowledge_base_arn           = (known after apply)
      [32m+[0m[0m knowledge_base_configuration = {
          [32m+[0m[0m kendra_knowledge_base_configuration = (known after apply)
          [32m+[0m[0m sql_knowledge_base_configuration    = (known after apply)
          [32m+[0m[0m type                                = "VECTOR"
          [32m+[0m[0m vector_knowledge_base_configuration = {
              [32m+[0m[0m embedding_model_arn                     = "arn:aws:bedrock:ap-southeast-1::foundation-model/amazon.titan-embed-text-v1"
              [32m+[0m[0m embedding_model_configuration           = (known after apply)
              [32m+[0m[0m supplemental_data_storage_configuration = (known after apply)
            }
        }
      [32m+[0m[0m knowledge_base_id            = (known after apply)
      [32m+[0m[0m name                         = "bedrock-chat-poc-kb-dev"
      [32m+[0m[0m role_arn                     = (known after apply)
      [32m+[0m[0m status                       = (known after apply)
      [32m+[0m[0m storage_configuration        = {
          [32m+[0m[0m mongo_db_atlas_configuration             = (known after apply)
          [32m+[0m[0m neptune_analytics_configuration          = (known after apply)
          [32m+[0m[0m opensearch_managed_cluster_configuration = (known after apply)
          [32m+[0m[0m opensearch_serverless_configuration      = (known after apply)
          [32m+[0m[0m pinecone_configuration                   = (known after apply)
          [32m+[0m[0m rds_configuration                        = (known after apply)
          [32m+[0m[0m s3_vectors_configuration                 = {
              [32m+[0m[0m index_arn         = (known after apply)
              [32m+[0m[0m index_name        = (known after apply)
              [32m+[0m[0m vector_bucket_arn = (known after apply)
            }
          [32m+[0m[0m type                                     = "S3_VECTORS"
        }
      [32m+[0m[0m tags                         = {
          [32m+[0m[0m "CreatedAt"   = "2025-12-07"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "bedrock-chat-poc"
        }
      [32m+[0m[0m updated_at                   = (known after apply)
    }

[1mPlan:[0m 15 to add, 0 to change, 0 to destroy.
[0m
Changes to Outputs:
  [32m+[0m[0m agent_arn              = (known after apply)
  [32m+[0m[0m agent_role_arn         = (known after apply)
  [32m+[0m[0m aws_region             = "ap-southeast-1"
  [32m+[0m[0m bedrock_agent_alias_id = (known after apply)
  [32m+[0m[0m bedrock_agent_id       = (known after apply)
  [32m+[0m[0m data_source_id         = (known after apply)
  [32m+[0m[0m documents_bucket_name  = (known after apply)
  [32m+[0m[0m kb_role_arn            = (known after apply)
  [32m+[0m[0m knowledge_base_arn     = (known after apply)
  [32m+[0m[0m knowledge_base_id      = (known after apply)
  [32m+[0m[0m vectors_bucket_name    = "bedrock-chat-poc-kb-vectors-dev"
[90m
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

Saved the plan to: tfplan

To perform exactly these actions, run the following command to apply:
    terraform apply "tfplan"
